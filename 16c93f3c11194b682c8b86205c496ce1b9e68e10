{
  "comments": [
    {
      "key": {
        "uuid": "87034eb2_46938e1e",
        "filename": "core/fpdfapi/parser/cpdf_reference.cpp",
        "patchSetId": 1
      },
      "lineNbr": 67,
      "author": {
        "id": 6000
      },
      "writtenOn": "2017-03-16T16:36:01Z",
      "side": 1,
      "message": "I suspect this could cause some infinite loop. Did you try cases such as reference obj X to an object Y (dict or array) which has a reference back to X?",
      "range": {
        "startLine": 67,
        "startChar": 13,
        "endLine": 67,
        "endChar": 20
      },
      "revId": "16c93f3c11194b682c8b86205c496ce1b9e68e10",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d41c423e_6075341a",
        "filename": "core/fpdfapi/parser/cpdf_reference.cpp",
        "patchSetId": 1
      },
      "lineNbr": 67,
      "author": {
        "id": 5965
      },
      "writtenOn": "2017-03-16T17:25:11Z",
      "side": 1,
      "message": "The check for the clone is the same as before, the difference is, I don\u0027t return nullptr anymore if the object has already been cloned, I return a Reference.",
      "parentUuid": "87034eb2_46938e1e",
      "range": {
        "startLine": 67,
        "startChar": 13,
        "endLine": 67,
        "endChar": 20
      },
      "revId": "16c93f3c11194b682c8b86205c496ce1b9e68e10",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cb09882f_91b4b7cc",
        "filename": "core/fpdfapi/parser/cpdf_reference.cpp",
        "patchSetId": 1
      },
      "lineNbr": 67,
      "author": {
        "id": 6000
      },
      "writtenOn": "2017-03-16T18:58:00Z",
      "side": 1,
      "message": "The problem is when you clone X, you need to Clone Y, then you need to clone X again, won\u0027t this be a loop?",
      "parentUuid": "d41c423e_6075341a",
      "range": {
        "startLine": 67,
        "startChar": 13,
        "endLine": 67,
        "endChar": 20
      },
      "revId": "16c93f3c11194b682c8b86205c496ce1b9e68e10",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "540f54aa_28225f1d",
        "filename": "core/fpdfapi/parser/cpdf_reference.cpp",
        "patchSetId": 1
      },
      "lineNbr": 67,
      "author": {
        "id": 5965
      },
      "writtenOn": "2017-03-16T18:59:58Z",
      "side": 1,
      "message": "Doesn\u0027t that fail the ContainsKey check? In which case we don\u0027t clone, we just create a CPDF_Reference and return that. We don\u0027t clone anything if it\u0027s already been cloned.",
      "parentUuid": "cb09882f_91b4b7cc",
      "range": {
        "startLine": 67,
        "startChar": 13,
        "endLine": 67,
        "endChar": 20
      },
      "revId": "16c93f3c11194b682c8b86205c496ce1b9e68e10",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9b373a07_9e59217a",
        "filename": "core/fpdfapi/parser/cpdf_reference.cpp",
        "patchSetId": 1
      },
      "lineNbr": 67,
      "author": {
        "id": 6000
      },
      "writtenOn": "2017-03-20T16:59:52Z",
      "side": 1,
      "message": "Returning a reference while pDirect\u003dtrue may break other code. I think a better fix would be using separate *pVisited set for elements in CPDF_Array and CPDF_Dictionary.",
      "parentUuid": "540f54aa_28225f1d",
      "range": {
        "startLine": 67,
        "startChar": 13,
        "endLine": 67,
        "endChar": 20
      },
      "revId": "16c93f3c11194b682c8b86205c496ce1b9e68e10",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4f77bf18_43358833",
        "filename": "core/fpdfapi/parser/cpdf_reference.cpp",
        "patchSetId": 1
      },
      "lineNbr": 67,
      "author": {
        "id": 5965
      },
      "writtenOn": "2017-03-21T14:16:13Z",
      "side": 1,
      "message": "Won\u0027t we still have cycle issues if we use different visited objects if the array has a dictionary that points at the array?",
      "parentUuid": "9b373a07_9e59217a",
      "range": {
        "startLine": 67,
        "startChar": 13,
        "endLine": 67,
        "endChar": 20
      },
      "revId": "16c93f3c11194b682c8b86205c496ce1b9e68e10",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "92849851_adcf1632",
        "filename": "core/fpdfapi/parser/cpdf_reference.cpp",
        "patchSetId": 1
      },
      "lineNbr": 67,
      "author": {
        "id": 6000
      },
      "writtenOn": "2017-03-22T21:48:15Z",
      "side": 1,
      "message": "I am a bit concerned that other places may have similar kind of accesses. I tried to fix in a different way https://pdfium-review.googlesource.com/c/3156/, pls see whether that is ok.",
      "parentUuid": "4f77bf18_43358833",
      "range": {
        "startLine": 67,
        "startChar": 13,
        "endLine": 67,
        "endChar": 20
      },
      "revId": "16c93f3c11194b682c8b86205c496ce1b9e68e10",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": true
    }
  ]
}